# CYA Web Application - Christian Youth in Action

## Overview
A comprehensive web application for African Inland Church's Christian Youth in Action (CYA) ministry, featuring a Bible trivia game, role-based user management, secure admin panels, and a collaborative dashboard for church youth members.

## Project Structure
```
webgame1/
├── server/
│   └── app.js          # Express server with all API endpoints
├── public/
│   ├── landing.html    # Landing page
│   ├── login.html      # Login/signup page with registration codes
│   ├── dashboard.html  # Main user dashboard
│   ├── game.html       # Bible trivia game with modal interface
│   ├── leaderboard.html # Leaderboard with sorting options
│   ├── admin.html      # Admin panel (role-based access)
│   ├── css/
│   │   └── style.css   # Global styles
│   └── js/
│       ├── login.js    # Authentication logic
│       ├── dashboard.js # Dashboard functionality
│       └── game.js     # Game logic
├── data/
│   ├── users.json              # Encrypted user data
│   ├── registrationCodes.json  # Registration codes
│   ├── events.json             # Church events
│   ├── announcements.json      # Announcements
│   └── tasks.json              # Tasks
└── package.json
```

## Role Hierarchy

### Administrative Roles
1. **System Admin** - Highest level, manages registration codes, users, and game content
2. **Admin** - Manages users and balances
3. **Moderator** - Manages game questions and content

### Ministry Roles
4. **Chairperson** - Can manage events, announcements, and tasks
5. **Vice Chairperson** - Can view events and announcements
6. **Secretary** - Can manage events and announcements
7. **Organizing Secretary** - Can manage events
8. **Treasurer** - Can view events
9. **General Member** - Basic access to game and dashboard

## Key Features

### Registration Code System
- New users must provide a registration code to sign up
- Codes are generated by System Admin
- Each code determines the user's role
- Codes are single-use

### Admin Panel (Secure Access)
- System Admin Tab: Generate and manage registration codes
- Admin Tab: User management, balance adjustments, stats reset
- Moderator Tab: Add/edit/delete game questions

### Bible Trivia Game
- 8 categories: Old Testament, New Testament, Jesus & Gospels, Apostles, Kings, Prophets, Parables, Miracles
- Modal/popup question interface
- 30-second timer per question
- Point system based on answer speed
- Purchasable hints

### Leaderboard
- Sort by wins, balance, games played, or win rate
- Detailed stats per player
- Gold/Silver/Bronze rankings

### Dashboard
- Announcements and events display
- Role-based task assignments
- Community posts feed
- Online members display
- Quick stats widget

## Permission Restrictions

### Events & Announcements Management
Only the following roles can create, edit, or delete events and announcements:
- Chairperson
- Secretary  
- Organizing Secretary

Note: System Admin, Admin, and Moderator do NOT have access to modify events/announcements - this is restricted to ministry leadership roles only.

## API Endpoints

### Authentication
- POST `/api/signup` - Register with registration code
- POST `/api/login` - Login
- POST `/api/validate-code` - Validate registration code

### Game
- GET `/api/categories` - List game categories
- GET `/api/get-question` - Get random question from category
- POST `/api/play-game` - Submit answer
- POST `/api/buy-hint` - Purchase hint

### Admin (Protected)
- GET/POST/DELETE `/api/admin/codes` - Registration codes (System Admin)
- GET `/api/admin/users` - List users (Admin+)
- POST `/api/admin/users/:username/reset` - Reset stats
- POST `/api/admin/users/:username/balance` - Adjust balance
- DELETE `/api/admin/users/:username` - Delete user (System Admin)
- GET/POST/DELETE `/api/admin/questions` - Game questions (Moderator+)

### Dashboard
- GET `/api/events` - List events
- POST `/api/events` - Create/edit event (Ministry roles only)
- DELETE `/api/events/:id` - Delete event (Ministry roles only)
- GET `/api/announcements` - List announcements
- POST `/api/announcements` - Create/edit (Ministry roles only)
- DELETE `/api/announcements/:id` - Delete (Ministry roles only)
- GET `/api/leaderboard` - Public leaderboard

## Default Registration Code
On first run, a default System Admin code is created:
`SYSADMIN2025`

## Technology Stack
- Node.js with Express
- bcryptjs for password hashing
- jsonwebtoken for authentication
- crypto for data encryption
- File-based JSON storage

## Developer
Developed by: **dennie-softs**
